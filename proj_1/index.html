<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photo Gallery for Proj1</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .container-section {
            @apply max-w-7xl mx-auto p-4 md:p-8 my-8 bg-white rounded-xl shadow-lg;
        }
        
        /* CSS for the hover effect on gallery items */
        .gallery-item {
            /* Adds a smooth transition for the transform effect */
            transition: transform 0.3s ease-in-out;
            cursor: pointer;
        }

        .gallery-item:hover {
            /* Scales the card to 1.05 times its original size on hover */
            transform: scale(1.05);
            /* Adds a slight shadow to enhance the "lift" effect */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* Styles for the full-screen modal */
        #photo-modal {
            background-color: rgba(0, 0, 0, 0.85);
            z-index: 9999;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <header class="py-8 bg-indigo-600 text-white shadow-xl">
        <div class="container mx-auto px-4 flex flex-col items-center text-center relative">
            <a href="https://yuchenzhang789.github.io/index.html" class="absolute top-4 left-4 md:left-8 px-4 py-2 text-sm md:text-base border border-white rounded-full hover:bg-white hover:text-indigo-600 transition-colors duration-200">
                &lt; Back to Main Page
            </a>
            <h1 class="text-4xl font-bold tracking-tight mb-2">Project 1 Photo Gallery</h1>
            <p class="text-lg opacity-90">(The images can be enlarged to see details by clicking on them)</p>
        </div>
    </header>

    <!-- Updated Introduction Section -->
    <section class="container-section mb-12">
        <h2 class="text-3xl font-bold mb-6 text-center text-indigo-600">Introduction</h2>
        <div class="p-6 bg-gray-50 rounded-lg text-gray-700 leading-relaxed">
            <p class="mb-4">
                The primary objective of this project is to implement algorithms to process and align the RGB plates originally captured by **Sergey Prokudin-Gorskii** using red, green, and blue glass filters. By aligning these three color channels, it is possible to reconstruct full-color images from historical black-and-white photographs.
            </p>
            <p>
                In addition to alignment, a **pyramid algorithm** is introduced to efficiently handle high-resolution images by reducing computation time and memory usage. Several **post-processing enhancements** are also developed, including:
            </p>
            <ul class="list-disc list-inside mt-4 pl-4 space-y-2">
                <li>Automatic cropping</li>
                <li>Automatic contrast adjustment</li>
                <li>Automatic white balance</li>
                <li>Color remapping via LUTs</li>
                <li>Improved alignment metrics</li>
            </ul>
        </div>
    </section>

    <!-- Image Alignment Section -->
    <section class="container-section mb-12">
        <h2 class="text-3xl font-bold mb-6 text-center text-indigo-600">Image Alignment</h2>
        <div class="space-y-8">
            <div class="p-6 bg-gray-50 rounded-lg text-gray-700 leading-relaxed">
                <h3 class="text-2xl font-semibold mb-4 text-indigo-600">Metric-Based Alignment</h3>
                <p>
                    A `Metric` class was implemented to compute similarity scores between channel pairs. Two primary metrics were explored: **L2 Norm** and **Normalized Cross-Correlation (NCC)**. For low-resolution images (`.jpg`), a single-scale search was sufficient. Displacements were evaluated in a window of approximately `(-15, 15)` pixels, which reliably produced accurate alignment. Among the tested metrics, **NCC consistently outperformed L2 norm**.
                </p>
            </div>
        </div>
    </section>

    <!-- Single-scale Implementation on JPG Images gallery section -->
    <section class="container-section">
        <h2 class="text-3xl font-bold mb-6 text-center text-indigo-600">Single-scale Implementation on JPG Images</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/rgb_output/rgb_monastery.jpg" alt="Emir" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Monastery</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/rgb_output/rgb_cathedral.jpg" alt="Italil" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Cathedral</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/rgb_output/rgb_tobolsk.jpg" alt="Monastery" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Tobolsk</p>
            </div>
        </div>
    </section>

    <section class="container-section mb-12">
        <h2 class="text-3xl font-bold mb-6 text-center text-indigo-600">Multiscale Pyramid on RGB Image</h2>
        <div class="space-y-8">
            <div class="p-6 bg-gray-50 rounded-lg text-gray-700 leading-relaxed">
                <h3 class="text-2xl font-semibold mb-4 text-indigo-600">Pyramid (Multi-Scale) Alignment</h3>
                <p>
                    For high-resolution images (`.tif`), an **image pyramid** was employed to reduce computational cost: The image is recursively downsampled by a factor of 2 until it reaches the approximate scale of low-resolution inputs. A local displacement is computed on the downsampled image. This displacement is doubled and refined within a smaller search window (≈ `(-6, 6)` pixels) at the next resolution level. The process continues until the full resolution is restored. This approach significantly accelerates alignment while maintaining accuracy.
                </p>
                <p class="mt-4">
                    However, the high-res images were still a few pixels away from perfect alignment, which I believe was due to the black borders affecting the metric calculation. To fix this, I added a **10% cropping** from each border of the images before calculating the displacement, and align the uncropped image after acquiring the displacement using the pyramid design. This worked really well since the black borders are removed before calculations. Therefore, I was able to achieve perfect alignment using NCC and raw RGB values for all images except for the Emir image.
                </p>
            </div>
        </div>
    </section>

    <!-- Multiscale Pyramid on RGB Image gallery section -->
    <section class="container-section">
        <h2 class="text-3xl font-bold mb-6 text-center text-indigo-600">Multiscale Pyramid on RGB Image</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/rgb_output/rgb_emir.jpg" alt="Emir" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Emir (G shift (49, 23), R shift (107, 40))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/rgb_output/rgb_italil.jpg" alt="Italil" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Italil (G shift (38, 22), R shift (77, 36))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/rgb_output/rgb_church.jpg" alt="Church" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Church (G shift (25, 4), R shift (58, -4))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/rgb_output/rgb_three_generations.jpg" alt="Three Generations" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Three Generations (G shift (56, 12), R shift (111, 8))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/rgb_output/rgb_lugano.jpg" alt="Lugano" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Lugano (G shift (41, -15), R shift (93, -29))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/rgb_output/rgb_melons.jpg" alt="Melons" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Melons (G shift (80, 10), R shift (176, 14))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/rgb_output/rgb_lastochikino.jpg" alt="Lastochikino" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Lastochikino (G shift (-3, -1), R shift (75, -8))</p>
            </div>

            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/rgb_output/rgb_icon.jpg" alt="Icon" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Icon (G shift (39, 16), R shift (88, 22))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/rgb_output/rgb_siren.jpg" alt="Siren" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Siren (G shift (48, -8), R shift (96, -24))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/rgb_output/rgb_self_portrait.jpg" alt="Self Portrait" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Self Portrait (G shift (77, 29), R shift (175, 37))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/rgb_output/rgb_harvesters.jpg" alt="Harvesters" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Harvesters (G shift (60, 17), R shift (123, 14))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/rgb_output/rgb_railwayMan.jpg" alt="Placeholder photo 15" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Railway workers (G shift (34, -14), R shift (121, -26))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/rgb_output/rgb_statue.jpg" alt="Placeholder photo 16" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Pami︠a︡tnik na reduti︠e︡ (G shift (56, 0), R shift (124, 0))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/rgb_output/rgb_farmhouse.jpg" alt="Placeholder photo 17" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Farmhouse (G shift (36, -6), R shift (122, -14))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/rgb_output/rgb_byTheLake.jpg" alt="Placeholder photo 17" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">By the lake (G shift (-23, 9), R shift (-35, 13))</p>
            </div>
        </div>
    </section>

    <!-- Bells and Whistles Section -->
    <section class="container-section mb-12">
        <h2 class="text-3xl font-bold mb-6 text-center text-indigo-600">Bells & Whistles</h2>
        <div class="space-y-8">
            <div class="p-6 bg-gray-50 rounded-lg text-gray-700 leading-relaxed">
                <h3 class="text-2xl font-semibold mb-4 text-indigo-600">Alternative Metrics</h3>
                <p>
                    To improve robustness, additional metrics were implemented: **Gradients** (computed using `cv2.Sobel`) and **Edges** (extracted using `cv2.Canny` with Gaussian blurring). Both metrics were integrated into the `Metric` class, enabling alignment based on gradient or edge similarity. The **edge + NCC** combination produced near-perfect alignment results on high-resolution images.
                </p>
            </div>
            <div class="p-6 bg-gray-50 rounded-lg text-gray-700 leading-relaxed">
                <h3 class="text-2xl font-semibold mb-4 text-indigo-600">Automatic Cropping</h3>
                <p>
                    Auto-cropping was developed using gradients and edges, exploiting the observation that borders exhibit low activity. Initial attempts left residual black borders due to timestamps or thin colored lines. A fixed **2% margin** was removed from each side prior to border detection, eliminating most artifacts.
                </p>
            </div>
            <div class="p-6 bg-gray-50 rounded-lg text-gray-700 leading-relaxed">
                <h3 class="text-2xl font-semibold mb-4 text-indigo-600">Automatic Contrast Adjustment</h3>
                <p>
                    Two approaches were tested for contrast normalization: **Min–max scaling**, which is sensitive to outlier pixels, and **Percentile-based scaling**, which is more robust as it discards extreme outliers. Percentile scaling was adopted as the default. Non-linear methods, such as **histogram equalization**, were also tested but performed poorly on this dataset.
                </p>
            </div>
            <div class="p-6 bg-gray-50 rounded-lg text-gray-700 leading-relaxed">
                <h3 class="text-2xl font-semibold mb-4 text-indigo-600">Automatic White Balance</h3>
                <p>
                    Two classical methods were explored: **Gray World** (rescaling based on average channel values) and **White World** (rescaling based on maximum channel values). The **White World method** yielded superior results in most cases.
                </p>
            </div>
            <div class="p-6 bg-gray-50 rounded-lg text-gray-700 leading-relaxed">
                <h3 class="text-2xl font-semibold mb-4 text-indigo-600">Color Mapping with LUTs</h3>
                <p>
                    Color remapping was implemented using the **pylut** library. More than 20 LUTs were tested, but many produced unrealistic colorizations. A few high-quality LUTs produced natural-looking results and in some cases **replaced the need for white balancing**.
                </p>
            </div>
        </div>
    </section>

    <!-- Bells & Whistles Sections gallery -->
    <main class="container-section">
        <h2 class="text-3xl font-bold mb-6 text-center text-indigo-600">Bells & Whistles Sections</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/output/processed_emir.jpg" alt="Emir" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Emir (G shift (49, 23), R shift (107, 40))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/output/processed_italil.jpg" alt="Italil" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Italil (G shift (38, 22), R shift (77, 36))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/output/processed_monastery.jpg" alt="Monastery" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Monastery (G shift (-3, 2), R shift (3, 2))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/output/processed_church.jpg" alt="Church" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Church (G shift (25, 4), R shift (58, -4))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/output/processed_three_generations.jpg" alt="Three Generations" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Three Generations (G shift (56, 12), R shift (111, 8))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/output/processed_lugano.jpg" alt="Lugano" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Lugano (G shift (41, -15), R shift (93, -29))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/output/processed_melons.jpg" alt="Melons" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Melons (G shift (80, 10), R shift (176, 14))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/output/processed_non_remap_lastochikino.jpg" alt="Lastochikino" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Lastochikino (G shift (-3, -1), R shift (75, -8))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/output/processed_tobolsk.jpg" alt="Tobolsk" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Tobolsk (G shift (3, 3), R shift (6, 3))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/output/processed_icon.jpg" alt="Icon" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Icon (G shift (39, 16), R shift (88, 22))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/output/processed_cathedral.jpg" alt="Cathedral" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Cathedral (G shift (5, 2), R shift (12, 3))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/output/processed_siren.jpg" alt="Siren" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Siren (G shift (48, -8), R shift (96, -24))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/output/processed_self_portrait.jpg" alt="Self Portrait" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Self Portrait (G shift (77, 29), R shift (175, 37))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/output/processed_harvesters.jpg" alt="Harvesters" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Harvesters (G shift (60, 17), R shift (123, 14))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/output/processed_railwayMan.jpg" alt="Placeholder photo 15" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Railway workers (G shift (34, -14), R shift (121, -26))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/output/processed_statue.jpg" alt="Placeholder photo 16" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Pami︠a︡tnik na reduti︠e︡ (G shift (56, 0), R shift (124, 0))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/output/processed_farmhouse.jpg" alt="Placeholder photo 17" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Farmhouse (G shift (36, -6), R shift (122, -14))</p>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/output/processed_byTheLake.jpg" alt="Placeholder photo 17" class="w-full h-48 object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">By the lake (G shift (-23, 9), R shift (-35, 13))</p>
            </div>
        </div>
    </main>

    <section class="container-section">
        <h2 class="text-3xl font-bold mb-6 text-center text-indigo-600">Comparison before and after Bells & Whistles</h2>
        <div class="flex flex-col md:flex-row justify-center items-center gap-8">
            <div class="w-full md:w-1/2 bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/output/processed_raw_emir.jpg" alt="Raw photo" class="w-full h-auto object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Raw Emir Image</p>
            </div>
            <div class="w-full md:w-1/2 bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/output/processed_emir.jpg" alt="Processed photo" class="w-full h-auto object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Emir image with bells & whistles </p>
            </div>
            <div class="w-full md:w-1/2 bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/output/processed_raw_icon.jpg" alt="Raw photo" class="w-full h-auto object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Raw Icon Image</p>
            </div>
            <div class="w-full md:w-1/2 bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                <img src="https://yuchenzhang789.github.io/proj_1/output/processed_icon.jpg" alt="Processed photo" class="w-full h-auto object-cover">
                <p class="p-4 font-semibold text-center text-gray-700">Icon image with bells & whistles</p>
            </div>
        </div>
    </section>

    <div id="photo-modal" class="fixed inset-0 hidden items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-2xl max-w-5xl max-h-[90vh] overflow-hidden flex flex-col relative">
            <button id="close-modal-btn" class="absolute top-4 right-4 text-white text-3xl font-bold bg-gray-800 rounded-full w-10 h-10 flex items-center justify-center hover:bg-gray-700 transition-colors z-50">
                &times;
            </button>
            <div class="flex-grow flex items-center justify-center overflow-hidden">
                <img id="modal-image" src="" alt="" class="max-w-full max-h-full object-contain rounded-lg">
            </div>
            <p id="modal-caption" class="p-4 text-center font-semibold text-lg text-gray-800"></p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const galleryItems = document.querySelectorAll('.gallery-item');
            const modal = document.getElementById('photo-modal');
            const modalImage = document.getElementById('modal-image');
            const modalCaption = document.getElementById('modal-caption');
            const closeModalBtn = document.getElementById('close-modal-btn');

            function showModal(imageSrc, imageAlt, captionText) {
                modalImage.src = imageSrc;
                modalImage.alt = imageAlt;
                modalCaption.textContent = captionText;
                modal.classList.remove('hidden');
                modal.classList.add('flex');
                document.body.style.overflow = 'hidden'; // Prevents scrolling
            }

            function closeModal() {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
                document.body.style.overflow = ''; // Restores scrolling
            }

            galleryItems.forEach(item => {
                item.addEventListener('click', (event) => {
                    const img = item.querySelector('img');
                    const caption = item.querySelector('p');
                    showModal(img.src, img.alt, caption.textContent);
                });
            });

            // Close the modal when the button is clicked
            closeModalBtn.addEventListener('click', closeModal);

            // Close the modal if the user clicks the background
            modal.addEventListener('click', (event) => {
                if (event.target === modal) {
                    closeModal();
                }
            });

            // Close the modal with the Escape key
            document.addEventListener('keydown', (event) => {
                if (event.key === 'Escape' && !modal.classList.contains('hidden')) {
                    closeModal();
                }
            });
        });
    </script>
</body>
</html>
