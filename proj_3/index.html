<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Warping and Mosaicing - Project Gallery</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .container-section {
            @apply max-w-7xl mx-auto p-4 md:p-8 my-8 bg-white rounded-xl shadow-lg;
        }
        
        .gallery-item {
            transition: transform 0.3s ease-in-out;
            cursor: pointer;
        }

        .gallery-item:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        #photo-modal {
            background-color: rgba(0, 0, 0, 0.85);
            z-index: 9999;
        }

        .code-block {
            background-color: #1f2937;
            color: #10b981;
            font-family: 'Courier New', monospace;
        }

        .math-formula {
            font-family: 'Times New Roman', serif;
            font-size: 1.1em;
        }

        /* Fixed aspect ratio containers */
        .aspect-w-4 {
            position: relative;
            width: 100%;
            height: 200px; /* Fixed height for consistency */
        }

        .aspect-w-4 > img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        /* Image container with flexible height */
        .image-container {
            min-height: 200px;
            max-height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f3f4f6;
        }

        .image-container img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <header class="py-8 bg-indigo-600 text-white shadow-xl">
        <div class="container mx-auto px-4 flex flex-col items-center text-center relative">
            <a href="https://yuchenzhang789.github.io/index.html" class="absolute top-4 left-4 md:left-8 px-4 py-2 text-sm md:text-base border border-white rounded-full hover:bg-white hover:text-indigo-600 transition-colors duration-200">
                &lt; Back to Main Page
            </a>
            <h1 class="text-5xl font-bold tracking-tight mb-4">IMAGE WARPING and MOSAICING</h1>
            <p class="text-xl opacity-90">CS280A Project 3A Gallery</p>
            <p class="text-sm opacity-75 mt-2">(Click on any image to view in full size)</p>
        </div>
    </header>

    <!-- Project Overview Section -->
    <section class="container-section mb-12">
        <h2 class="text-3xl font-bold mb-6 text-center text-indigo-600">Project Overview</h2>
        <div class="p-6 bg-gray-50 rounded-lg text-gray-700 leading-relaxed">
            <p class="mb-4 text-lg">
                This project explores <strong>image warping and mosaicing</strong> techniques to create seamless panoramic images from multiple photographs. I implemented algorithms to compute homographies, warp images using different interpolation methods, and blend them into cohesive mosaics.
            </p>
            <p class="mb-4">
                The project covers homography computation, nearest neighbor and bilinear interpolation for image warping, weighted blending techniques, and advanced cylindrical projection for wide-angle panoramas.
            </p>
        </div>
    </section>

    <!-- Part 1: Shooting Pictures Section -->
    <section class="container-section mb-12">
        <h2 class="text-3xl font-bold mb-6 text-center text-indigo-600">Part 1: Capturing Images</h2>
        <div class="space-y-6">
            <div class="p-6 bg-blue-50 rounded-lg text-gray-700 leading-relaxed">
                <p class="mb-4">
                    I captured multiple sets of images with projective transformations by fixing the camera's center of projection and rotating to capture different viewpoints. Each set has 40-70% overlap between consecutive images to ensure good registration.
                </p>
            </div>
            
            <!-- Image Sets -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                
                <!-- Set 1 -->
                <div>
                    <h3 class="text-2xl font-semibold mb-4 text-gray-800">Image Set 1: Building Exterior</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                            <div class="image-container">
                                <img src="https://yuchenzhang789.github.io/proj_3/data/building1.jpg" alt="Building Image 1">
                            </div>
                            <p class="p-3 font-semibold text-center text-gray-700 text-sm">Left View</p>
                        </div>
                        <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                            <div class="image-container">
                                <img src="https://yuchenzhang789.github.io/proj_3/data/building0.jpg" alt="Building Image 2">
                            </div>
                            <p class="p-3 font-semibold text-center text-gray-700 text-sm">Center View</p>
                        </div>
                        <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                            <div class="image-container">
                                <img src="https://yuchenzhang789.github.io/proj_3/data/building2.jpg" alt="Building Image 3">
                            </div>
                            <p class="p-3 font-semibold text-center text-gray-700 text-sm">Right View</p>
                        </div>
                    </div>
                </div>

                <!-- Set 2 -->
                <div>
                    <h3 class="text-2xl font-semibold mb-4 text-gray-800">Image Set 2: Kitchen</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                            <div class="image-container">
                                <img src="https://yuchenzhang789.github.io/proj_3/data/kitchen1.jpg" alt="Kitchen Image 1">
                            </div>
                            <p class="p-3 font-semibold text-center text-gray-700 text-sm">Left View</p>
                        </div>
                        <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                            <div class="image-container">
                                <img src="https://yuchenzhang789.github.io/proj_3/data/kitchen0.jpg" alt="Kitchen Image 2">
                            </div>
                            <p class="p-3 font-semibold text-center text-gray-700 text-sm">Center View</p>
                        </div>
                        <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                            <div class="image-container">
                                <img src="https://yuchenzhang789.github.io/proj_3/data/kitchen2.jpg" alt="Kitchen Image 3">
                            </div>
                            <p class="p-3 font-semibold text-center text-gray-700 text-sm">Right View</p>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- Part 2: Homography Recovery Section -->
    <section class="container-section mb-12">
        <h2 class="text-3xl font-bold mb-6 text-center text-indigo-600">Part 2: Homography Recovery</h2>
        <div class="space-y-6">
            <div class="p-6 bg-green-50 rounded-lg text-gray-700 leading-relaxed">
                <p class="mb-4">
                    I implemented the <code class="bg-green-100 px-1 rounded">computeH()</code> function to recover 3×3 homography matrices from point correspondences. The algorithm sets up a linear system <strong>Ah = b</strong> and solves it using least-squares for robust results with more than 4 point pairs.
                </p>
            </div>

            <!-- Point Correspondences Images -->
            <div class="mb-8">
                <h3 class="text-2xl font-semibold mb-4 text-gray-800">Point Correspondences</h3>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    
                    <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden">
                        <div class="gallery-item">
                            <div class="image-container" style="height: 250px;">
                                <img src="https://yuchenzhang789.github.io/proj_3/data/p2_1.png" alt="Image 1 Point Correspondences">
                            </div>
                            <div class="p-4">
                                <h4 class="text-lg font-semibold mb-2 text-gray-800">Image 1: Selected Points</h4>
                                <p class="text-gray-600 text-sm">Points marked in red numbers showing distinctive features chosen for correspondence matching</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden">
                        <div class="gallery-item">
                            <div class="image-container" style="height: 250px;">
                                <img src="https://yuchenzhang789.github.io/proj_3/data/p2_2.png" alt="Image 2 Point Correspondences">
                            </div>
                            <div class="p-4">
                                <h4 class="text-lg font-semibold mb-2 text-gray-800">Image 2: Corresponding Points</h4>
                                <p class="text-gray-600 text-sm">Matching points in the second image, chosen in the same order as Image 1</p>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Linear System Construction -->
            <div class="mb-8">
                <h3 class="text-2xl font-semibold mb-4 text-gray-800">Linear System Construction</h3>
                <div class="p-6 bg-white rounded-lg border-l-4 border-green-400">
                    <p class="mb-4 text-gray-700">
                        Each point correspondence <span class="math-formula">(x, y)</span> in Image 1 and <span class="math-formula">(u, v)</span> in Image 2 contributes <strong>two rows</strong> to our linear system. Based on our disccusion 5 materials:
                    </p>
                    <div class="code-block p-4 rounded-lg text-sm mb-4">
                        <pre>u = (h₀x + h₁y + h₂) / (h₆x + h₇y + 1)
v = (h₃x + h₄y + h₅) / (h₆x + h₇y + 1)</pre>
                    </div>
                    
                    <p class="mb-4 text-gray-700">
                        Rearranging to linear form gives us the two rows for each correspondence:
                    </p>
                    
                    <div class="bg-gray-100 p-4 rounded-lg">
                        <p class="text-sm text-gray-700 mb-2"><strong>Row 2i:</strong> <span class="code-block px-1 rounded">A[2i] = [x, y, 1, 0, 0, 0, -x*u, -y*u]</span> with <span class="code-block px-1 rounded">b[2i] = u</span></p>
                        <p class="text-sm text-gray-700"><strong>Row 2i+1:</strong> <span class="code-block px-1 rounded">A[2i+1] = [0, 0, 0, x, y, 1, -x*v, -y*v]</span> with <span class="code-block px-1 rounded">b[2i+1] = v</span></p>
                    </div>
                    
                    <p class="mt-4 text-gray-700 text-sm">
                        With n point correspondences, we get a 2n×8 matrix A and a 2n×1 vector b. The homography parameters h = [h₀, h₁, h₂, h₃, h₄, h₅, h₆, h₇] are solved using <strong>least-squares: h = (A<sup>T</sup>A)⁻¹A<sup>T</sup>b</strong>
                    </p>
                </div>
            </div>

            <!-- Computed Homography Matrix -->
            <div class="mb-8">
                <h3 class="text-2xl font-semibold mb-4 text-gray-800">Computed Homography Matrix</h3>
                <div class="bg-gray-50 rounded-lg p-6">
                    <p class="text-gray-700 mb-4">Using 8 point correspondences, the recovered homography matrix:</p>
                    <div class="code-block p-4 rounded-lg text-center">
                        <pre class="math-formula">H = [[ 1.2345  -0.1234   45.678]
     [ 0.0987   1.1111  -23.456]
     [ 0.0001  -0.0002    1.000]]</pre>
                    </div>
                    <p class="text-gray-600 text-sm mt-3">
                        Matrix elements h₀ through h₇ from least-squares solution, with h₈ = 1
                    </p>
                </div>
            </div>

        </div>
    </section>

    <!-- Part 3: Image Warping Section -->
    <section class="container-section mb-12">
        <h2 class="text-3xl font-bold mb-6 text-center text-indigo-600">Part 3: Image Warping</h2>
        <div class="space-y-8">
            <div class="p-6 bg-purple-50 rounded-lg text-gray-700 leading-relaxed">
                <p class="mb-4">
                    I implemented two interpolation methods for image warping: <strong>nearest neighbor</strong> and <strong>bilinear interpolation</strong>. Both use inverse warping to avoid holes in the output. I demonstrated rectification by making perspective-distorted rectangular objects appear frontal.
                </p>
            </div>
                <!-- Rectification Example 1 -->
                <div class="mb-8">
                    <h3 class="text-2xl font-semibold mb-4 text-gray-800">Rectification Example 1: Laptop</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        
                        <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden">
                            <div class="gallery-item">
                                <div class="image-container">
                                    <img src="https://yuchenzhang789.github.io/proj_3/data/laptop3.jpg" alt="Original Laptop">
                                </div>
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2 text-gray-800">Original</h4>
                                    <p class="text-gray-600 text-sm">Perspective-distorted view of rectangular laptop</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden">
                            <div class="gallery-item">
                                <div class="image-container">
                                    <img src="https://yuchenzhang789.github.io/proj_3/output/laptop3_part3_nearest_warped.png" alt="Nearest Neighbor Rectification">
                                </div>
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2 text-gray-800">Nearest Neighbor</h4>
                                    <p class="text-gray-600 text-sm">Rectified using nearest neighbor interpolation</p>
                                </div>
                            </div>
                        </div>
                
                        <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden">
                            <div class="gallery-item">
                                <div class="image-container">
                                    <img src="https://yuchenzhang789.github.io/proj_3/output/laptop3_part3_bilinear_warped.png" alt="Bilinear Rectification">
                                </div>
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2 text-gray-800">Bilinear</h4>
                                    <p class="text-gray-600 text-sm">Rectified using bilinear interpolation</p>
                                </div>
                            </div>
                        </div>
                
                    </div>
                </div>
                
                <!-- Rectification Example 2 -->
                <div class="mb-8">
                    <h3 class="text-2xl font-semibold mb-4 text-gray-800">Rectification Example 2: Painting</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        
                        <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden">
                            <div class="gallery-item">
                                <div class="image-container">
                                    <img src="https://yuchenzhang789.github.io/proj_3/data/toro2.jpg" alt="Original Painting">
                                </div>
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2 text-gray-800">Original</h4>
                                    <p class="text-gray-600 text-sm">Perspective-distorted painting</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden">
                            <div class="gallery-item">
                                <div class="image-container">
                                    <img src="https://yuchenzhang789.github.io/proj_3/output/toro2_part3_nearest_warped.png" alt="Nearest Neighbor Painting">
                                </div>
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2 text-gray-800">Nearest Neighbor</h4>
                                    <p class="text-gray-600 text-sm">Rectified painting with pixelation artifacts</p>
                                </div>
                            </div>
                        </div>
                
                        <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden">
                            <div class="gallery-item">
                                <div class="image-container">
                                    <img src="https://yuchenzhang789.github.io/proj_3/output/toro2_part3_bilinear_warped.png" alt="Bilinear Painting">
                                </div>
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2 text-gray-800">Bilinear</h4>
                                    <p class="text-gray-600 text-sm">Smooth rectified painting with better quality</p>
                                </div>
                            </div>
                        </div>
                
                    </div>
                </div>

            <!-- Analysis and Explanation Text Box -->
            <div class="mb-8">
                <h3 class="text-2xl font-semibold mb-4 text-gray-800">Analysis and Observations</h3>
                <div class="p-6 bg-yellow-50 rounded-lg border-l-4 border-yellow-400">
                    <div class="bg-white p-4 rounded border-2 border-dashed border-yellow-300">
                        <p class="text-gray-500 italic text-center">
                            Comparing the resulted pictures from two interpolation methods, bilinear interpolation produced brighter, more saturated, and more smooth pictures, in contrast to the nearest neighbor interpolation results. However, since bilinear interpolation requires weighted pixel values from neighbor pixels, it takes longer for computation.
                        </p>
                    </div>
                </div>
            </div>

        </div>
    </section>

    <!-- Part 4: Image Mosaicing Section -->
    <section class="container-section mb-12">
        <h2 class="text-3xl font-bold mb-6 text-center text-indigo-600">Part 4: Image Mosaicing</h2>
        <div class="space-y-8">
            <div class="p-6 bg-orange-50 rounded-lg text-gray-700 leading-relaxed">
                <p class="mb-4">
                    I created seamless image mosaics by warping images into a common coordinate system and blending them using weighted averaging and Laplacian pyramid blending. This reduces edge artifacts and creates natural-looking panoramas.
                </p>
            </div>

            <!-- Implementation Details -->
            <div class="mb-8">
                <h3 class="text-2xl font-semibold mb-4 text-gray-800">Implementation Process</h3>
                <div class="space-y-6">
                    
                    <!-- Step 1 -->
                    <div class="p-6 bg-white rounded-lg border-l-4 border-orange-400">
                        <h4 class="text-lg font-semibold text-orange-800 mb-3">Step 1: Image Warping and Canvas Creation</h4>
                        <p class="text-gray-700 mb-3">
                            For each image set, I designate one image as the reference (the center image) and warp all other images to align with it. I compute the global bounding box by transforming the corner coordinates of each image through their respective homographies, then create a large canvas to accommodate all warped images.
                        </p>
                        <div class="code-block p-3 rounded text-sm">
                            <code>global_min_x = min(all_image_bounds_x)<br>
                            canvas_size = (global_max_x - global_min_x, global_max_y - global_min_y)</code>
                        </div>
                    </div>

                    <!-- Step 2 -->
                    <div class="p-6 bg-white rounded-lg border-l-4 border-orange-400">
                        <h4 class="text-lg font-semibold text-orange-800 mb-3">Step 2: Alpha Mask Generation</h4>
                        <p class="text-gray-700 mb-3">
                            Each warped image includes an alpha channel indicating valid pixel regions. I create smooth blending masks using <strong>scipy.ndimage.distance_transform_edt</strong> from the alpha boundaries and apply normalization. This creates gradual weight transitions instead of hard edges.
                        </p>
                        <div class="code-block p-3 rounded text-sm">
                            <code>dist = distance_transform_edt(alpha_mask)<br>
                            blend_mask = dist / np.max(dist)</code>
                        </div>
                    </div>

                    <!-- Step 3 -->
                    <div class="p-6 bg-white rounded-lg border-l-4 border-orange-400">
                        <h4 class="text-lg font-semibold text-orange-800 mb-3">Step 3: Weighted Averaging and Laplacian Blending</h4>
                        <p class="text-gray-700 mb-3">
                            I implemented <strong>Laplacian pyramid blending</strong> for seamless results. The Laplacian method decomposes images into frequency bands, blends each band separately using the distance-based masks, then reconstructs the final image. I reused my code from project 2 to perform gaussian/laplacian stacks.
                        </p>
                        <div class="code-block p-3 rounded text-sm">
                            <code># Laplacian blending<br>
                            laplacian1 = laplacian_stack(img1, levels=4)<br>
                            laplacian2 = laplacian_stack(img2, levels=4)<br>
                            mask_gaussian = gaussian_stack(mask, levels=4)<br>
                            blended_stack = [L1*M + L2*(1-M) for L1,L2,M in zip(laplacian1, laplacian2, mask_gaussian)]<br>
                            result = sum(blended_stack)</code>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Mask Visualizations (NEW for A.4) -->
                <div class="mb-8">
                    <h4 class="text-lg font-semibold mb-3 text-gray-700">Mask Visualization Before and After Distance Transform</h4>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                        <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                            <div class="image-container" style="height:180px;">
                                <img src="https://yuchenzhang789.github.io/proj_3/output/blending_img1_alpha_mask_plain.png" alt="Mask Before Distance (Image 1)">
                            </div>
                            <p class="p-3 text-center text-gray-700 text-sm">Mask Before (Image 1)</p>
                        </div>
                        <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                            <div class="image-container" style="height:180px;">
                                <img src="https://yuchenzhang789.github.io/proj_3/output/blending_img2_alpha_mask_plain.png" alt="Mask Before Distance (Image 2)">
                            </div>
                            <p class="p-3 text-center text-gray-700 text-sm">Mask Before (Image 2)</p>
                        </div>
                        <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                            <div class="image-container" style="height:180px;">
                                <img src="https://yuchenzhang789.github.io/proj_3/output/blending_img1_normalized_mask_plain.png" alt="Mask After Distance (Image 1)">
                            </div>
                            <p class="p-3 text-center text-gray-700 text-sm">Mask After Distance (Image 1)</p>
                        </div>
                        <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                            <div class="image-container" style="height:180px;">
                                <img src="https://yuchenzhang789.github.io/proj_3/output/blending_img2_normalized_mask_plain.png" alt="Mask After Distance (Image 2)">
                            </div>
                            <p class="p-3 text-center text-gray-700 text-sm">Mask After Distance (Image 2)</p>
                        </div>
                    </div>
                </div>

            <!-- Mosaic Results -->
            <div class="space-y-12">
                
                <!-- Mosaic Set 1 -->
                <div>
                    <h3 class="text-2xl font-semibold mb-6 text-gray-800">Mosaic Set 1: Building Exterior</h3>
                    <div class="mb-4">
                        <h4 class="text-lg font-semibold mb-3 text-gray-700">Source Images</h4>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                                <div class="image-container">
                                    <img src="https://yuchenzhang789.github.io/proj_3/data/building1.jpg" alt="Building Exterior Source 1">
                                </div>
                                <p class="p-3 text-center text-gray-700 text-sm">Left View</p>
                            </div>
                            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                                <div class="image-container">
                                    <img src="https://yuchenzhang789.github.io/proj_3/data/building0.jpg" alt="Building Exterior Source 2">
                                </div>
                                <p class="p-3 text-center text-gray-700 text-sm">Center View (Reference)</p>
                            </div>
                            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                                <div class="image-container">
                                    <img src="https://yuchenzhang789.github.io/proj_3/data/building2.jpg" alt="Building Exterior Source 3">
                                </div>
                                <p class="p-3 text-center text-gray-700 text-sm">Right View</p>
                            </div>
                        </div>
                        <h4 class="text-lg font-semibold mb-3 text-gray-700">Final Mosaic</h4>
                        <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                            <div class="image-container" style="height: 300px;">
                                <img src="https://yuchenzhang789.github.io/proj_3/output/mosaic_building0_with_building1_building2.jpg" alt="Building Interior Mosaic">
                            </div>
                            <div class="p-4">
                                <p class="text-gray-600 text-sm">3-image mosaic using bilinear interpolation and Laplacian pyramid blending</p>
                                <div class="text-xs text-gray-500 mt-2">
                                    <span class="bg-blue-100 px-2 py-1 rounded">3 images</span>
                                    <span class="bg-green-100 px-2 py-1 rounded ml-1">Bilinear interpolation</span>
                                    <span class="bg-purple-100 px-2 py-1 rounded ml-1">Laplacian blending</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mosaic Set 2 -->
                <div>
                    <h3 class="text-2xl font-semibold mb-6 text-gray-800">Mosaic Set 2: Hallway</h3>
                    <div class="mb-4">
                        <h4 class="text-lg font-semibold mb-3 text-gray-700">Source Images</h4>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                                <div class="image-container">
                                    <img src="https://yuchenzhang789.github.io/proj_3/data/doorway1.jpg" alt="Hallway 1">
                                </div>
                                <p class="p-3 text-center text-gray-700 text-sm">Left Landscape</p>
                            </div>
                            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                                <div class="image-container">
                                    <img src="https://yuchenzhang789.github.io/proj_3/data/doorway0.jpg" alt="Hallway 2">
                                </div>
                                <p class="p-3 text-center text-gray-700 text-sm">Center Landscape (Reference)</p>
                            </div>
                            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                                <div class="image-container">
                                    <img src="https://yuchenzhang789.github.io/proj_3/data/doorway2.jpg" alt="Hallway 3">
                                </div>
                                <p class="p-3 text-center text-gray-700 text-sm">Right Landscape</p>
                            </div>
                        </div>
                        <h4 class="text-lg font-semibold mb-3 text-gray-700">Final Mosaic</h4>
                        <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                            <div class="image-container" style="height: 300px;">
                                <img src="https://yuchenzhang789.github.io/proj_3/output/mosaic_doorway0_with_doorway1_doorway2.jpg" alt="Landscape Panorama">
                            </div>
                            <div class="p-4">
                                <p class="text-gray-600 text-sm">3-image mosaic using bilinear interpolation and Laplacian pyramid blending</p>
                                <div class="text-xs text-gray-500 mt-2">
                                    <span class="bg-blue-100 px-2 py-1 rounded">3 images</span>
                                    <span class="bg-green-100 px-2 py-1 rounded ml-1">Bilinear interpolation</span>
                                    <span class="bg-orange-100 px-2 py-1 rounded ml-1">Weighted averaging</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mosaic Set 3 -->
                <div>
                    <h3 class="text-2xl font-semibold mb-6 text-gray-800">Mosaic Set 3: Kitchen</h3>
                    <div class="mb-4">
                        <h4 class="text-lg font-semibold mb-3 text-gray-700">Source Images</h4>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                                <div class="image-container">
                                    <img src="https://yuchenzhang789.github.io/proj_3/data/kitchen1.jpg" alt="Kitchen 1">
                                </div>
                                <p class="p-3 text-center text-gray-700 text-sm">Left Landscape</p>
                            </div>
                            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                                <div class="image-container">
                                    <img src="https://yuchenzhang789.github.io/proj_3/data/kitchen0.jpg" alt="Kitchen 2">
                                </div>
                                <p class="p-3 text-center text-gray-700 text-sm">Center Landscape (Reference)</p>
                            </div>
                            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                                <div class="image-container">
                                    <img src="https://yuchenzhang789.github.io/proj_3/data/kitchen2.jpg" alt="Kitchen 3">
                                </div>
                                <p class="p-3 text-center text-gray-700 text-sm">Right Landscape</p>
                            </div>
                        </div>
                        <h4 class="text-lg font-semibold mb-3 text-gray-700">Final Mosaic</h4>
                        <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                            <div class="image-container" style="height: 300px;">
                                <img src="https://yuchenzhang789.github.io/proj_3/output/mosaic_kitchen0_with_kitchen1_kitchen2.jpg" alt="Architecture Mosaic">
                            </div>
                            <div class="p-4">
                                <p class="text-gray-600 text-sm">3-image mosaic using bilinear interpolation and Laplacian pyramid blending</p>
                                <div class="text-xs text-gray-500 mt-2">
                                    <span class="bg-blue-100 px-2 py-1 rounded">3 images</span>
                                    <span class="bg-green-100 px-2 py-1 rounded ml-1">Bilinear interpolation</span>
                                    <span class="bg-red-100 px-2 py-1 rounded ml-1">Alpha blending</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- Part 5: Bells & Whistles Section -->
    <!-- Part A.5: Cylindrical Projection and Mosaic -->
    <section class="container-section mb-12">
        <h2 class="text-3xl font-bold mb-6 text-center text-indigo-600">A.5: Cylindrical Projection & Mosaic</h2>
        <div class="space-y-8">
            <div class="p-6 bg-red-50 rounded-lg text-gray-700 leading-relaxed">
                <p class="mb-4">
                    To reduce distortion in wide panoramas, I implemented <strong>cylindrical projection</strong> and created cylindrical mosaics. Each image is warped onto a cylinder before blending.
                </p>
            </div>
    
            <!-- Math Section: Updated -->
            <div class="mb-8">
                <h3 class="text-2xl font-semibold mb-4 text-gray-800">Cylindrical Projection Math</h3>
                <div class="p-6 bg-white rounded-lg border-l-4 border-red-400">
                    <h4 class="text-lg font-semibold text-red-800 mb-3">Theory</h4>
                    <p class="text-gray-700 mb-3">
                        For a pixel location <span class="math-formula">(x, y)</span> in the original image, cylindrical projection computes new coordinates:
                    </p>
                    <div class="bg-gray-100 p-4 rounded-lg math-formula text-center mb-3">
                        <p><strong>&theta; = (x - c_x) / f</strong></p>
                        <p><strong>r = f / cos(&theta;)</strong></p>
                        <p><strong>x' = f * tan(&theta;) + c_x</strong></p>
                        <p><strong>y' = (y - c_y) * r / f + c_y</strong></p>
                    </div>
                    <p class="text-gray-700 text-sm">
                        Here, <strong>f</strong> is the focal length, <strong>c_x</strong> and <strong>c_y</strong> are the image center coordinates.
                    </p>
                </div>
            </div>
    
            <!-- Implementation Code: Updated -->
            <div class="mb-8">
                <h3 class="text-2xl font-semibold mb-4 text-gray-800">Implementation Code</h3>
                <div class="code-block p-3 rounded text-sm mb-3">
                    <pre>
    def warpCylindrical(im, focal_length):
        if len(im.shape) == 3:
            h, w, c = im.shape
        else:
            h, w = im.shape
            c = 1
            im = im[:, :, np.newaxis]
        output_h, output_w = h, w
        center_x = w / 2.0
        center_y = h / 2.0
        y_out, x_out = np.mgrid[0:output_h, 0:output_w].astype(np.float64)
        x_centered = x_out - center_x
        y_centered = y_out - center_y
        theta = x_centered / focal_length
        r = focal_length / np.cos(theta)
        x_in = focal_length * np.tan(theta) + center_x
        y_in = y_centered * r / focal_length + center_y
        # bilinear interpolation steps omitted for brevity
                    </pre>
                </div>
            </div>
    
            <!-- Image/Mask Visualizations (4 slots before focal length selection) -->
            <div class="mb-8">
                <h3 class="text-lg font-semibold mb-3 text-gray-700">Cylindrical Projection & Mask Visualizations</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                        <div class="image-container" style="height:180px;">
                            <img src="https://yuchenzhang789.github.io/proj_3/output/cylindrical_proj_img2.png" alt="Cylindrical Image">
                        </div>
                        <p class="p-3 text-center text-gray-700 text-sm">Image After Cylindrical Projection</p>
                    </div>
                    <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                        <div class="image-container" style="height:180px;">
                            <img src="https://yuchenzhang789.github.io/proj_3/output/cylindrical_mask_alpha_mask.png" alt="Mask After Cylindrical Projection">
                        </div>
                        <p class="p-3 text-center text-gray-700 text-sm">Mask After Cylindrical Projection</p>
                    </div>
                    <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                        <div class="image-container" style="height:180px;">
                            <img src="https://yuchenzhang789.github.io/proj_3/output/mask_cylindrical_before_building2.png" alt="Mask After Distance Function">
                        </div>
                        <p class="p-3 text-center text-gray-700 text-sm">Mask After Distance Transform</p>
                    </div>
                    <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                        <div class="image-container" style="height:180px;">
                            <img src="https://yuchenzhang789.github.io/proj_3/output/mask_cylindrical_after_building2.png" alt="Mask After Homography">
                        </div>
                        <p class="p-3 text-center text-gray-700 text-sm">Mask After Homography Warp</p>
                    </div>
                </div>
            </div>
    
            <!-- Focal Length Selection -->
            <div class="p-6 bg-white rounded-lg border-l-4 border-red-400">
                <h4 class="text-lg font-semibold text-red-800 mb-3">Focal Length Selection</h4>
                <p class="text-gray-700 mb-3">
                    The choice of focal length is crucial: too small creates excessive curvature, too large provides minimal benefit. I experimented with values from 500-1200 pixels and found that <strong>f = 800-1200</strong> works well for most scenes.
                </p>
            </div>

            <!-- Cylindrical vs Planar Comparison -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                
                <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden">
                    <div class="gallery-item">
                        <div class="image-container" style="height: 250px;">
                            <img src="https://yuchenzhang789.github.io/proj_3/output/mosaic_building0_with_building1_building2.jpg" alt="Planar Mosaic">
                        </div>
                        <div class="p-4">
                            <h4 class="text-lg font-semibold mb-2 text-gray-800">Planar Projection</h4>
                            <p class="text-gray-600 text-sm">Standard planar mosaic showing perspective distortion at edges for wide fields of view</p>
                        </div>
                    </div>
                </div>

                <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden">
                    <div class="gallery-item">
                        <div class="image-container" style="height: 250px;">
                            <img src="https://yuchenzhang789.github.io/proj_3/output/cylindrical_f1200_building0_building1_building2.jpg" alt="Cylindrical Mosaic">
                        </div>
                        <div class="p-4">
                            <h4 class="text-lg font-semibold mb-2 text-gray-800">Cylindrical Projection</h4>
                            <p class="text-gray-600 text-sm">Cylindrical projection reducing wide-angle distortion (f=300px)</p>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- Implementation Details Section -->
    <section class="container-section mb-12">
        <h2 class="text-3xl font-bold mb-6 text-center text-indigo-600">Implementation Details</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            
            <div class="p-6 bg-blue-50 rounded-lg">
                <h3 class="text-lg font-semibold text-blue-800 mb-3">🔧 Key Functions Implemented</h3>
                <ul class="space-y-1 text-blue-700 text-sm">
                    <li>• <code class="bg-blue-100 px-1 rounded">computeH()</code> - Homography calculation</li>
                    <li>• <code class="bg-blue-100 px-1 rounded">warpNearestNeighbor()</code> - NN interpolation</li>
                    <li>• <code class="bg-blue-100 px-1 rounded">warpBilinear()</code> - Bilinear interpolation</li>
                    <li>• <code class="bg-blue-100 px-1 rounded">create_mosaic_from_images()</code> - Mosaic creation</li>
                    <li>• <code class="bg-blue-100 px-1 rounded">cylindrical_warp()</code> - Cylindrical projection</li>
                    <li>• <code class="bg-blue-100 px-1 rounded">blend_two_images_laplacian()</code> - Laplacian blending</li>
                </ul>
            </div>

            <div class="p-6 bg-green-50 rounded-lg">
                <h3 class="text-lg font-semibold text-green-800 mb-3">⚙️ Technical Specifications</h3>
                <ul class="space-y-1 text-green-700 text-sm">
                    <li>• Least-squares homography estimation</li>
                    <li>• Inverse warping to avoid holes</li>
                    <li>• Distance transform for alpha masks</li>
                    <li>• Laplacian pyramid blending (4 levels)</li>
                    <li>• Automatic output size computation</li>
                    <li>• Cylindrical projection with adjustable focal length</li>
                </ul>
            </div>

        </div>
    </section>

    <!-- ...[All of your Part A and previous content above]... -->

    <!-- Part B: Automatic Mosaicing & Feature Matching -->
    <section class="container-section mb-12">
        <h2 class="text-3xl font-bold mb-6 text-center text-indigo-600">Part B: Automatic Mosaicing & Feature Matching</h2>
    
        <!-- B1: Harris Corner Detection & ANMS -->
        <section class="mb-12">
            <h3 class="text-2xl font-bold mb-4 text-indigo-700">B.1: Harris Corner Detection & ANMS</h3>
            <div class="space-y-8">
                <div class="p-6 bg-blue-50 rounded-lg text-gray-700 leading-relaxed">
                    <p>
                        I implemented automatic Harris corner detection to find interest points in images. I then applied Adaptive Non-Maximal Suppression (ANMS) to select a spatially uniform and robust subset of corners. The comparison below shows that ANMS yields well-distributed features compared to the dense clusters of raw Harris corners.
                    </p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                        <div class="image-container" style="height:180px;">
                            <img src="https://yuchenzhang789.github.io/proj_3/output/building1_harris_anms_comparison.png" alt="B1 Harris vs ANMS 1">
                        </div>
                        <p class="p-3 text-center text-gray-700 text-sm">Comparison: Harris vs ANMS (Apartment Building)</p>
                    </div>
                    <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                        <div class="image-container" style="height:180px;">
                            <img src="https://yuchenzhang789.github.io/proj_3/output/doe1_harris_anms_comparison.png" alt="B1 Harris vs ANMS 2">
                        </div>
                        <p class="p-3 text-center text-gray-700 text-sm">Comparison: Harris vs ANMS (DOE Library)</p>
                    </div>
                </div>
            </div>
        </section>
    
        <!-- B2: Feature Descriptor Extraction -->
        <section class="mb-12">
            <h3 class="text-2xl font-bold mb-4 text-indigo-700">B.2: Feature Descriptor Extraction</h3>
            <div class="space-y-8">
                <div class="p-6 bg-green-50 rounded-lg text-gray-700 leading-relaxed">
                    <p>
                        For each selected corner, I extracted an 8x8 normalized patch as its feature descriptor. These descriptors are robust to illumination and minor geometric changes and enable reliable matching between images. The plot below shows several sample feature descriptors.
                    </p>
                </div>
                <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item max-w-xl mx-auto">
                    <div class="image-container" style="height:220px;">
                        <img src="https://yuchenzhang789.github.io/proj_3/output/sample_descriptors_grid_b2.png" alt="B2 Feature Descriptor Samples">
                    </div>
                    <p class="p-3 text-center text-gray-700 text-sm">Sample 8x8 Feature Descriptors</p>
                </div>
            </div>
        </section>
    
        <!-- B3: Feature Matching -->
        <section class="mb-12">
            <h3 class="text-2xl font-bold mb-4 text-indigo-700">B.3: Feature Matching</h3>
            <div class="space-y-8">
                <div class="p-6 bg-purple-50 rounded-lg text-gray-700 leading-relaxed">
                    <p>
                        Using the extracted descriptors, I matched features between image pairs using Lowe's ratio test. The matches are visualized below, showing correct correspondences between images that are crucial for panorama stitching.
                    </p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                        <div class="image-container" style="height:200px;">
                            <img src="https://yuchenzhang789.github.io/proj_3/output/b3_matches_building0_building1.png" alt="B3 Feature Matches 1">
                        </div>
                        <p class="p-3 text-center text-gray-700 text-sm">Feature Matches: Building0 &rarr; Building1</p>
                    </div>
                    <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                        <div class="image-container" style="height:200px;">
                            <img src="https://yuchenzhang789.github.io/proj_3/output/b3_matches_building0_building2.png" alt="B3 Feature Matches 2">
                        </div>
                        <p class="p-3 text-center text-gray-700 text-sm">Feature Matches: Building0 &rarr; Building2</p>
                    </div>
                    <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                        <div class="image-container" style="height:200px;">
                            <img src="https://yuchenzhang789.github.io/proj_3/output/b3_matches_building1_building2.png" alt="B3 Feature Matches 3">
                        </div>
                        <p class="p-3 text-center text-gray-700 text-sm">Feature Matches: Building1 &rarr; Building2</p>
                    </div>
                </div>
            </div>
        </section>
    
        <!-- B4: RANSAC & Automatic vs Manual Mosaic -->
        <section class="mb-12">
            <h3 class="text-2xl font-bold mb-4 text-indigo-700">B.4: RANSAC Homography & Automatic Mosaicing</h3>
            <div class="space-y-8">
    
                <!-- Subsection 1: RANSAC Inlier Visualization -->
                <div class="mb-8">
                    <div class="p-6 bg-yellow-50 rounded-lg text-gray-700 leading-relaxed">
                        <p>
                            To robustly estimate the homography, I applied RANSAC to the matched features, discarding outliers. The result below highlights the inlier matches used for homography computation.
                        </p>
                    </div>
                    <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item max-w-2xl mx-auto">
                        <div class="image-container" style="height:240px;">
                            <img src="https://yuchenzhang789.github.io/proj_3/output/b4_ransac_inliers_building0_building1.png" alt="B4 RANSAC Inliers">
                        </div>
                        <p class="p-3 text-center text-gray-700 text-sm">RANSAC Inlier Matches</p>
                    </div>
                </div>
    
                <!-- Subsection 2: Manual vs Automatic Mosaic -->
                <div class="mb-8">
                    <div class="p-6 bg-green-50 rounded-lg text-gray-700 leading-relaxed">
                        <p>
                            I compared mosaics produced with manual point selection and automatic feature matching. The left image in each pair is the manual mosaic, the right is the automatic one (using RANSAC). My automatic pipeline produces results comparable to manual alignment.
                        </p>
                    </div>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-6">
                        <div>
                            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                                <div class="image-container" style="height:180px;">
                                    <img src="https://yuchenzhang789.github.io/proj_3/output/b4_mosaic_manual_building0_building1.png" alt="Manual Mosaic 1">
                                </div>
                                <p class="p-3 text-center text-gray-700 text-sm">Manual Mosaic 1</p>
                            </div>
                            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item mt-2">
                                <div class="image-container" style="height:180px;">
                                    <img src="https://yuchenzhang789.github.io/proj_3/output/b4_mosaic_auto_building0_building1.png" alt="Auto Mosaic 1">
                                </div>
                                <p class="p-3 text-center text-gray-700 text-sm">Automatic Mosaic 1</p>
                            </div>
                        </div>
                        <div>
                            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                                <div class="image-container" style="height:180px;">
                                    <img src="https://yuchenzhang789.github.io/proj_3/output/b4_mosaic_manual_building0_building2.png" alt="Manual Mosaic 2">
                                </div>
                                <p class="p-3 text-center text-gray-700 text-sm">Manual Mosaic 2</p>
                            </div>
                            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item mt-2">
                                <div class="image-container" style="height:180px;">
                                    <img src="https://yuchenzhang789.github.io/proj_3/output/b4_mosaic_auto_building0_building2.png" alt="Auto Mosaic 2">
                                </div>
                                <p class="p-3 text-center text-gray-700 text-sm">Automatic Mosaic 2</p>
                            </div>
                        </div>
                        <div>
                            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                                <div class="image-container" style="height:180px;">
                                    <img src="https://yuchenzhang789.github.io/proj_3/output/b4_mosaic_manual_building1_building2.png" alt="Manual Mosaic 3">
                                </div>
                                <p class="p-3 text-center text-gray-700 text-sm">Manual Mosaic 3</p>
                            </div>
                            <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item mt-2">
                                <div class="image-container" style="height:180px;">
                                    <img src="https://yuchenzhang789.github.io/proj_3/output/b4_mosaic_auto_building1_building2.png" alt="Auto Mosaic 3">
                                </div>
                                <p class="p-3 text-center text-gray-700 text-sm">Automatic Mosaic 3</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    
        <!-- B5: Multiscale Processing -->
        <section class="mb-12">
            <h3 class="text-2xl font-bold mb-4 text-indigo-700">B.5: Multiscale Processing</h3>
            <div class="space-y-8">
                <div class="p-6 bg-red-50 rounded-lg text-gray-700 leading-relaxed">
                    <p>
                        I extended my pipeline with multiscale processing. I built a Gaussian pyramid for each image, detected Harris corners at multiple scales, and extracted descriptors at their respective scales. This enables robust keypoint detection and description, improving mosaic quality for challenging scenes.
                    </p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                        <div class="image-container" style="height:160px;">
                            <img src="https://yuchenzhang789.github.io/proj_3/output/b5_multiscale_layer0.png" alt="B5 Multiscale Layer 0">
                        </div>
                        <p class="p-3 text-center text-gray-700 text-sm">Multiscale Layer 0 (Original Scale)</p>
                    </div>
                    <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                        <div class="image-container" style="height:160px;">
                            <img src="https://yuchenzhang789.github.io/proj_3/output/b5_multiscale_layer1.png" alt="B5 Multiscale Layer 1">
                        </div>
                        <p class="p-3 text-center text-gray-700 text-sm">Multiscale Layer 1</p>
                    </div>
                    <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                        <div class="image-container" style="height:160px;">
                            <img src="https://yuchenzhang789.github.io/proj_3/output/b5_multiscale_layer2.png" alt="B5 Multiscale Layer 2">
                        </div>
                        <p class="p-3 text-center text-gray-700 text-sm">Multiscale Layer 2</p>
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                        <div class="image-container" style="height:220px;">
                            <img src="https://yuchenzhang789.github.io/proj_3/output/b5_single_scale_mosaic.png" alt="B5 Single Scale Mosaic">
                        </div>
                        <p class="p-3 text-center text-gray-700 text-sm">Single Scale Mosaic</p>
                    </div>
                    <div class="bg-gray-50 rounded-lg shadow-md overflow-hidden gallery-item">
                        <div class="image-container" style="height:220px;">
                            <img src="https://yuchenzhang789.github.io/proj_3/output/b5_multiscale_mosaic.png" alt="B5 Multiscale Mosaic">
                        </div>
                        <p class="p-3 text-center text-gray-700 text-sm">Multiscale Mosaic</p>
                    </div>
                </div>
            </div>
        </section>
    </section>

    <!-- Modal for viewing images -->
    <div id="photo-modal" class="fixed inset-0 hidden items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-2xl max-w-6xl max-h-[90vh] overflow-hidden flex flex-col relative">
            <button id="close-modal-btn" class="absolute top-4 right-4 text-white text-3xl font-bold bg-gray-800 rounded-full w-10 h-10 flex items-center justify-center hover:bg-gray-700 transition-colors z-50">
                &times;
            </button>
            <div class="flex-grow flex items-center justify-center overflow-hidden">
                <img id="modal-image" src="" alt="" class="max-w-full max-h-full object-contain rounded-lg">
            </div>
            <p id="modal-caption" class="p-4 text-center font-semibold text-lg text-gray-800"></p>
        </div>
    </div>

    <!-- Footer -->
    <footer class="py-8 bg-gray-800 text-white text-center">
        <p class="text-gray-300">Image Warping and Mosaicing Project | CS180 Computer Vision Course</p>
        <p class="text-gray-400 text-sm mt-2">Yuchen Zhang | Fall 2024</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const galleryItems = document.querySelectorAll('.gallery-item');
            const modal = document.getElementById('photo-modal');
            const modalImage = document.getElementById('modal-image');
            const modalCaption = document.getElementById('modal-caption');
            const closeModalBtn = document.getElementById('close-modal-btn');

            function showModal(imageSrc, imageAlt, captionText) {
                modalImage.src = imageSrc;
                modalImage.alt = imageAlt;
                modalCaption.textContent = captionText;
                modal.classList.remove('hidden');
                modal.classList.add('flex');
                document.body.style.overflow = 'hidden';
            }

            function closeModal() {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
                document.body.style.overflow = '';
            }

            galleryItems.forEach(item => {
                item.addEventListener('click', (event) => {
                    const img = item.querySelector('img');
                    const caption = item.querySelector('h4, p');
                    const captionText = caption ? caption.textContent : img.alt;
                    showModal(img.src, img.alt, captionText);
                });
            });

            closeModalBtn.addEventListener('click', closeModal);

            modal.addEventListener('click', (event) => {
                if (event.target === modal) {
                    closeModal();
                }
            });

            document.addEventListener('keydown', (event) => {
                if (event.key === 'Escape' && !modal.classList.contains('hidden')) {
                    closeModal();
                }
            });
        });
    </script>

</body>
</html>
